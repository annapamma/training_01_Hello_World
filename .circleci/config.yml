version: 2.1

parameters:
  run_job:
    type: boolean
    default: false

jobs:
  build:
    docker:
      - image: node:9.6.1
    steps:
      - run: echo "hello world"
  other-job:
    parameters:
    docker:
      - image: node:9.6.1
    steps:
      - run: echo ${CIRCLE_SHA1}
      - run: |
          curl --location --request GET 'https://api.github.com/repos/annapamma/training_01_Hello_World/commits/c691d3748ff73b274298c290b74054f099a7ccc5/check-runs' \
          --header 'Accept: application/vnd.github.antiope-preview+json'

workflows:
  build-wf:
    jobs:
      - build
  other-wf:
      when: << pipeline.parameters.run_job >>
      jobs:
        - other-job