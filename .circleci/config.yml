version: 2.1

jobs:
  build:
    docker:
      - image: "circleci/node:9.6.1"
    steps:
      - run: echo 'hello world'
  required_check:
    docker:
      - image: "circleci/node:9.6.1"
    steps:
      - run: echo 'required check'
#  e2e_tests_for_cti:
#    docker:
#      - image: "circleci/node:9.6.1"
#    steps:
#      - run: echo 'triggered from api'

workflows:
  test:
    jobs:
      - build
#      - required_check
#  test-from-api-fail:
#    jobs:
#      - fail_on_purpose
   e2e_tests_for_cti:
     when: << pipeline.parameters.is_cti_test >>
     jobs:
       - e2e_tests_for_cti