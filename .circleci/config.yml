version: 2.1

executors:
  linux:
    docker:
      - image: circleci/android:api-29-node

parameters:
  api_level:
    type: integer
    default: 27

commands:
  run-test:
    steps:
      - run: echo << parameters.api_level >>
  run-all-tests-with-custom-api-level:
#    parameters:
#      api_level:
#        type: integer
#        default: 27
    steps:
      - run-test:
          api_level: << parameters.api_level >>

jobs:
  run-tests-26:
    executor: linux
    steps:
      - run-all-tests-with-custom-api-level:
          api_level: 26

workflows:
  test:
    jobs:
      - run-tests-26
